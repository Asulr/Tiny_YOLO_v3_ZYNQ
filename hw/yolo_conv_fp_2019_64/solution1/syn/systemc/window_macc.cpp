// ==============================================================
// RTL generated by Vivado(TM) HLS - High-Level Synthesis from C, C++ and SystemC
// Version: 2019.1
// Copyright (C) 1986-2019 Xilinx, Inc. All Rights Reserved.
// 
// ===========================================================

#include "window_macc.h"
#include "AESL_pkg.h"

using namespace std;

namespace ap_rtl {

const sc_logic window_macc::ap_const_logic_1 = sc_dt::Log_1;
const sc_logic window_macc::ap_const_logic_0 = sc_dt::Log_0;
const bool window_macc::ap_const_boolean_1 = true;
const bool window_macc::ap_const_boolean_0 = false;

window_macc::window_macc(sc_module_name name) : sc_module(name), mVcdFile(0) {
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U6 = new yolo_conv_top_mul_mul_16s_16s_32_1_0<1,1,16,16,32>("yolo_conv_top_mul_mul_16s_16s_32_1_0_U6");
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U6->din0(p_read1_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U6->din1(p_read10_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U6->dout(mul_ln1118_1_fu_221_p2);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U7 = new yolo_conv_top_mul_mul_16s_16s_32_1_0<1,1,16,16,32>("yolo_conv_top_mul_mul_16s_16s_32_1_0_U7");
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U7->din0(p_read2_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U7->din1(p_read11_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U7->dout(mul_ln1118_2_fu_227_p2);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U8 = new yolo_conv_top_mul_mul_16s_16s_32_1_0<1,1,16,16,32>("yolo_conv_top_mul_mul_16s_16s_32_1_0_U8");
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U8->din0(p_read4_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U8->din1(p_read13_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U8->dout(mul_ln1118_4_fu_233_p2);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U9 = new yolo_conv_top_mul_mul_16s_16s_32_1_0<1,1,16,16,32>("yolo_conv_top_mul_mul_16s_16s_32_1_0_U9");
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U9->din0(p_read7_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U9->din1(p_read16_int_reg);
    yolo_conv_top_mul_mul_16s_16s_32_1_0_U9->dout(mul_ln1118_7_fu_239_p2);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10 = new yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0<1,1,16,16,32,32>("yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10");
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10->din0(p_read18_reg_326);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10->din1(p_read_9_reg_301);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10->din2(mul_ln1118_1_reg_331);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10->dout(grp_fu_245_p3);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11 = new yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0<1,1,16,16,32,32>("yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11");
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11->din0(p_read_15_reg_321);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11->din1(p_read_6_reg_296);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11->din2(mul_ln1118_2_reg_336);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11->dout(grp_fu_252_p3);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12 = new yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0<1,1,16,16,32,32>("yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12");
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12->din0(p_read_13_reg_316);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12->din1(p_read_4_reg_291);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12->din2(mul_ln1118_4_reg_341);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12->dout(grp_fu_259_p3);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13 = new yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0<1,1,16,16,32,32>("yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13");
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13->din0(p_read_10_reg_306);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13->din1(p_read_1_reg_281);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13->din2(mul_ln1118_7_reg_346);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13->dout(grp_fu_266_p3);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14 = new yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0<1,1,16,16,32,32>("yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14");
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14->din0(p_read_12_reg_311_pp0_iter1_reg);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14->din1(p_read_3_reg_286_pp0_iter1_reg);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14->din2(add_ln703_4_reg_366);
    yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14->dout(grp_fu_273_p3);

    SC_METHOD(thread_ap_clk_no_reset_);
    dont_initialize();
    sensitive << ( ap_clk.pos() );

    SC_METHOD(thread_add_ln703_2_fu_212_p2);
    sensitive << ( add_ln703_reg_351_pp0_iter2_reg );
    sensitive << ( add_ln703_1_reg_356_pp0_iter2_reg );

    SC_METHOD(thread_add_ln703_6_fu_208_p2);
    sensitive << ( add_ln703_3_reg_361 );
    sensitive << ( grp_fu_273_p3 );

    SC_METHOD(thread_add_ln703_7_fu_216_p2);
    sensitive << ( add_ln703_6_reg_371 );
    sensitive << ( add_ln703_2_fu_212_p2 );

    SC_METHOD(thread_ap_block_pp0_stage0);

    SC_METHOD(thread_ap_block_pp0_stage0_11001);

    SC_METHOD(thread_ap_block_state1_pp0_stage0_iter0);

    SC_METHOD(thread_ap_block_state2_pp0_stage0_iter1);

    SC_METHOD(thread_ap_block_state3_pp0_stage0_iter2);

    SC_METHOD(thread_ap_block_state4_pp0_stage0_iter3);

    SC_METHOD(thread_ap_return);
    sensitive << ( add_ln703_7_fu_216_p2 );
    sensitive << ( ap_ce_reg );
    sensitive << ( ap_return_int_reg );

    static int apTFileNum = 0;
    stringstream apTFilenSS;
    apTFilenSS << "window_macc_sc_trace_" << apTFileNum ++;
    string apTFn = apTFilenSS.str();
    mVcdFile = sc_create_vcd_trace_file(apTFn.c_str());
    mVcdFile->set_time_unit(1, SC_PS);
    if (1) {
#ifdef __HLS_TRACE_LEVEL_PORT_HIER__
    sc_trace(mVcdFile, ap_clk, "(port)ap_clk");
    sc_trace(mVcdFile, ap_rst, "(port)ap_rst");
    sc_trace(mVcdFile, p_read, "(port)p_read");
    sc_trace(mVcdFile, p_read1, "(port)p_read1");
    sc_trace(mVcdFile, p_read2, "(port)p_read2");
    sc_trace(mVcdFile, p_read3, "(port)p_read3");
    sc_trace(mVcdFile, p_read4, "(port)p_read4");
    sc_trace(mVcdFile, p_read5, "(port)p_read5");
    sc_trace(mVcdFile, p_read6, "(port)p_read6");
    sc_trace(mVcdFile, p_read7, "(port)p_read7");
    sc_trace(mVcdFile, p_read8, "(port)p_read8");
    sc_trace(mVcdFile, p_read9, "(port)p_read9");
    sc_trace(mVcdFile, p_read10, "(port)p_read10");
    sc_trace(mVcdFile, p_read11, "(port)p_read11");
    sc_trace(mVcdFile, p_read12, "(port)p_read12");
    sc_trace(mVcdFile, p_read13, "(port)p_read13");
    sc_trace(mVcdFile, p_read14, "(port)p_read14");
    sc_trace(mVcdFile, p_read15, "(port)p_read15");
    sc_trace(mVcdFile, p_read16, "(port)p_read16");
    sc_trace(mVcdFile, p_read17, "(port)p_read17");
    sc_trace(mVcdFile, ap_return, "(port)ap_return");
    sc_trace(mVcdFile, ap_ce, "(port)ap_ce");
#endif
#ifdef __HLS_TRACE_LEVEL_INT__
    sc_trace(mVcdFile, p_read_1_reg_281, "p_read_1_reg_281");
    sc_trace(mVcdFile, ap_block_state1_pp0_stage0_iter0, "ap_block_state1_pp0_stage0_iter0");
    sc_trace(mVcdFile, ap_block_state2_pp0_stage0_iter1, "ap_block_state2_pp0_stage0_iter1");
    sc_trace(mVcdFile, ap_block_state3_pp0_stage0_iter2, "ap_block_state3_pp0_stage0_iter2");
    sc_trace(mVcdFile, ap_block_state4_pp0_stage0_iter3, "ap_block_state4_pp0_stage0_iter3");
    sc_trace(mVcdFile, ap_block_pp0_stage0_11001, "ap_block_pp0_stage0_11001");
    sc_trace(mVcdFile, p_read_3_reg_286, "p_read_3_reg_286");
    sc_trace(mVcdFile, p_read_3_reg_286_pp0_iter1_reg, "p_read_3_reg_286_pp0_iter1_reg");
    sc_trace(mVcdFile, p_read_4_reg_291, "p_read_4_reg_291");
    sc_trace(mVcdFile, p_read_6_reg_296, "p_read_6_reg_296");
    sc_trace(mVcdFile, p_read_9_reg_301, "p_read_9_reg_301");
    sc_trace(mVcdFile, p_read_10_reg_306, "p_read_10_reg_306");
    sc_trace(mVcdFile, p_read_12_reg_311, "p_read_12_reg_311");
    sc_trace(mVcdFile, p_read_12_reg_311_pp0_iter1_reg, "p_read_12_reg_311_pp0_iter1_reg");
    sc_trace(mVcdFile, p_read_13_reg_316, "p_read_13_reg_316");
    sc_trace(mVcdFile, p_read_15_reg_321, "p_read_15_reg_321");
    sc_trace(mVcdFile, p_read18_reg_326, "p_read18_reg_326");
    sc_trace(mVcdFile, mul_ln1118_1_fu_221_p2, "mul_ln1118_1_fu_221_p2");
    sc_trace(mVcdFile, mul_ln1118_1_reg_331, "mul_ln1118_1_reg_331");
    sc_trace(mVcdFile, mul_ln1118_2_fu_227_p2, "mul_ln1118_2_fu_227_p2");
    sc_trace(mVcdFile, mul_ln1118_2_reg_336, "mul_ln1118_2_reg_336");
    sc_trace(mVcdFile, mul_ln1118_4_fu_233_p2, "mul_ln1118_4_fu_233_p2");
    sc_trace(mVcdFile, mul_ln1118_4_reg_341, "mul_ln1118_4_reg_341");
    sc_trace(mVcdFile, mul_ln1118_7_fu_239_p2, "mul_ln1118_7_fu_239_p2");
    sc_trace(mVcdFile, mul_ln1118_7_reg_346, "mul_ln1118_7_reg_346");
    sc_trace(mVcdFile, grp_fu_245_p3, "grp_fu_245_p3");
    sc_trace(mVcdFile, add_ln703_reg_351, "add_ln703_reg_351");
    sc_trace(mVcdFile, add_ln703_reg_351_pp0_iter2_reg, "add_ln703_reg_351_pp0_iter2_reg");
    sc_trace(mVcdFile, grp_fu_252_p3, "grp_fu_252_p3");
    sc_trace(mVcdFile, add_ln703_1_reg_356, "add_ln703_1_reg_356");
    sc_trace(mVcdFile, add_ln703_1_reg_356_pp0_iter2_reg, "add_ln703_1_reg_356_pp0_iter2_reg");
    sc_trace(mVcdFile, grp_fu_259_p3, "grp_fu_259_p3");
    sc_trace(mVcdFile, add_ln703_3_reg_361, "add_ln703_3_reg_361");
    sc_trace(mVcdFile, grp_fu_266_p3, "grp_fu_266_p3");
    sc_trace(mVcdFile, add_ln703_4_reg_366, "add_ln703_4_reg_366");
    sc_trace(mVcdFile, add_ln703_6_fu_208_p2, "add_ln703_6_fu_208_p2");
    sc_trace(mVcdFile, add_ln703_6_reg_371, "add_ln703_6_reg_371");
    sc_trace(mVcdFile, ap_block_pp0_stage0, "ap_block_pp0_stage0");
    sc_trace(mVcdFile, grp_fu_273_p3, "grp_fu_273_p3");
    sc_trace(mVcdFile, add_ln703_2_fu_212_p2, "add_ln703_2_fu_212_p2");
    sc_trace(mVcdFile, add_ln703_7_fu_216_p2, "add_ln703_7_fu_216_p2");
    sc_trace(mVcdFile, ap_ce_reg, "ap_ce_reg");
    sc_trace(mVcdFile, p_read_int_reg, "p_read_int_reg");
    sc_trace(mVcdFile, p_read1_int_reg, "p_read1_int_reg");
    sc_trace(mVcdFile, p_read2_int_reg, "p_read2_int_reg");
    sc_trace(mVcdFile, p_read3_int_reg, "p_read3_int_reg");
    sc_trace(mVcdFile, p_read4_int_reg, "p_read4_int_reg");
    sc_trace(mVcdFile, p_read5_int_reg, "p_read5_int_reg");
    sc_trace(mVcdFile, p_read6_int_reg, "p_read6_int_reg");
    sc_trace(mVcdFile, p_read7_int_reg, "p_read7_int_reg");
    sc_trace(mVcdFile, p_read8_int_reg, "p_read8_int_reg");
    sc_trace(mVcdFile, p_read9_int_reg, "p_read9_int_reg");
    sc_trace(mVcdFile, p_read10_int_reg, "p_read10_int_reg");
    sc_trace(mVcdFile, p_read11_int_reg, "p_read11_int_reg");
    sc_trace(mVcdFile, p_read12_int_reg, "p_read12_int_reg");
    sc_trace(mVcdFile, p_read13_int_reg, "p_read13_int_reg");
    sc_trace(mVcdFile, p_read14_int_reg, "p_read14_int_reg");
    sc_trace(mVcdFile, p_read15_int_reg, "p_read15_int_reg");
    sc_trace(mVcdFile, p_read16_int_reg, "p_read16_int_reg");
    sc_trace(mVcdFile, p_read17_int_reg, "p_read17_int_reg");
    sc_trace(mVcdFile, ap_return_int_reg, "ap_return_int_reg");
#endif

    }
}

window_macc::~window_macc() {
    if (mVcdFile) 
        sc_close_vcd_trace_file(mVcdFile);

    delete yolo_conv_top_mul_mul_16s_16s_32_1_0_U6;
    delete yolo_conv_top_mul_mul_16s_16s_32_1_0_U7;
    delete yolo_conv_top_mul_mul_16s_16s_32_1_0_U8;
    delete yolo_conv_top_mul_mul_16s_16s_32_1_0_U9;
    delete yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U10;
    delete yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U11;
    delete yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U12;
    delete yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U13;
    delete yolo_conv_top_mac_muladd_16s_16s_32s_32_1_0_U14;
}

void window_macc::thread_ap_clk_no_reset_() {
    ap_ce_reg = ap_ce.read();
    if ((esl_seteq<1,1,1>(ap_block_pp0_stage0_11001.read(), ap_const_boolean_0) && esl_seteq<1,1,1>(ap_ce_reg.read(), ap_const_logic_1))) {
        add_ln703_1_reg_356 = grp_fu_252_p3.read();
        add_ln703_1_reg_356_pp0_iter2_reg = add_ln703_1_reg_356.read();
        add_ln703_3_reg_361 = grp_fu_259_p3.read();
        add_ln703_4_reg_366 = grp_fu_266_p3.read();
        add_ln703_6_reg_371 = add_ln703_6_fu_208_p2.read();
        add_ln703_reg_351 = grp_fu_245_p3.read();
        add_ln703_reg_351_pp0_iter2_reg = add_ln703_reg_351.read();
        mul_ln1118_1_reg_331 = mul_ln1118_1_fu_221_p2.read();
        mul_ln1118_2_reg_336 = mul_ln1118_2_fu_227_p2.read();
        mul_ln1118_4_reg_341 = mul_ln1118_4_fu_233_p2.read();
        mul_ln1118_7_reg_346 = mul_ln1118_7_fu_239_p2.read();
        p_read18_reg_326 = p_read_int_reg.read();
        p_read_10_reg_306 = p_read8_int_reg.read();
        p_read_12_reg_311 = p_read6_int_reg.read();
        p_read_12_reg_311_pp0_iter1_reg = p_read_12_reg_311.read();
        p_read_13_reg_316 = p_read5_int_reg.read();
        p_read_15_reg_321 = p_read3_int_reg.read();
        p_read_1_reg_281 = p_read17_int_reg.read();
        p_read_3_reg_286 = p_read15_int_reg.read();
        p_read_3_reg_286_pp0_iter1_reg = p_read_3_reg_286.read();
        p_read_4_reg_291 = p_read14_int_reg.read();
        p_read_6_reg_296 = p_read12_int_reg.read();
        p_read_9_reg_301 = p_read9_int_reg.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_ce_reg.read())) {
        ap_return_int_reg = add_ln703_7_fu_216_p2.read();
    }
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_ce.read())) {
        p_read10_int_reg = p_read10.read();
        p_read11_int_reg = p_read11.read();
        p_read12_int_reg = p_read12.read();
        p_read13_int_reg = p_read13.read();
        p_read14_int_reg = p_read14.read();
        p_read15_int_reg = p_read15.read();
        p_read16_int_reg = p_read16.read();
        p_read17_int_reg = p_read17.read();
        p_read1_int_reg = p_read1.read();
        p_read2_int_reg = p_read2.read();
        p_read3_int_reg = p_read3.read();
        p_read4_int_reg = p_read4.read();
        p_read5_int_reg = p_read5.read();
        p_read6_int_reg = p_read6.read();
        p_read7_int_reg = p_read7.read();
        p_read8_int_reg = p_read8.read();
        p_read9_int_reg = p_read9.read();
        p_read_int_reg = p_read.read();
    }
}

void window_macc::thread_add_ln703_2_fu_212_p2() {
    add_ln703_2_fu_212_p2 = (!add_ln703_1_reg_356_pp0_iter2_reg.read().is_01() || !add_ln703_reg_351_pp0_iter2_reg.read().is_01())? sc_lv<32>(): (sc_bigint<32>(add_ln703_1_reg_356_pp0_iter2_reg.read()) + sc_bigint<32>(add_ln703_reg_351_pp0_iter2_reg.read()));
}

void window_macc::thread_add_ln703_6_fu_208_p2() {
    add_ln703_6_fu_208_p2 = (!grp_fu_273_p3.read().is_01() || !add_ln703_3_reg_361.read().is_01())? sc_lv<32>(): (sc_bigint<32>(grp_fu_273_p3.read()) + sc_bigint<32>(add_ln703_3_reg_361.read()));
}

void window_macc::thread_add_ln703_7_fu_216_p2() {
    add_ln703_7_fu_216_p2 = (!add_ln703_6_reg_371.read().is_01() || !add_ln703_2_fu_212_p2.read().is_01())? sc_lv<32>(): (sc_biguint<32>(add_ln703_6_reg_371.read()) + sc_biguint<32>(add_ln703_2_fu_212_p2.read()));
}

void window_macc::thread_ap_block_pp0_stage0() {
    ap_block_pp0_stage0 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_block_pp0_stage0_11001() {
    ap_block_pp0_stage0_11001 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_block_state1_pp0_stage0_iter0() {
    ap_block_state1_pp0_stage0_iter0 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_block_state2_pp0_stage0_iter1() {
    ap_block_state2_pp0_stage0_iter1 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_block_state3_pp0_stage0_iter2() {
    ap_block_state3_pp0_stage0_iter2 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_block_state4_pp0_stage0_iter3() {
    ap_block_state4_pp0_stage0_iter3 = !esl_seteq<1,1,1>(ap_const_boolean_1, ap_const_boolean_1);
}

void window_macc::thread_ap_return() {
    if (esl_seteq<1,1,1>(ap_const_logic_0, ap_ce_reg.read())) {
        ap_return = ap_return_int_reg.read();
    } else if (esl_seteq<1,1,1>(ap_const_logic_1, ap_ce_reg.read())) {
        ap_return = add_ln703_7_fu_216_p2.read();
    }
}

}

